<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>omicser development with golem • omicser</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="omicser development with golem">
<meta property="og:description" content="omicser">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">omicser</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.9.17092021</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/01_environment_setup.html">Environment Setup</a>
    </li>
    <li>
      <a href="../articles/02_install.html">Installation</a>
    </li>
    <li>
      <a href="../articles/03_data_curation.html">Data Curation</a>
    </li>
    <li>
      <a href="../articles/04_configuration.html">Database Configuration</a>
    </li>
    <li>
      <a href="../articles/05_browsing.html">Browsing</a>
    </li>
    <li>
      <a href="../articles/06_sharing.html">Sharing</a>
    </li>
    <li>
      <a href="../articles/README.html">UNKNOWN TITLE</a>
    </li>
    <li>
      <a href="../articles/golem_startup.html">omicser development with golem</a>
    </li>
    <li>
      <a href="../articles/python_and_R.html">R vs python with anndata</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ergonyc/omicser/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="golem_startup_files/header-attrs-2.10/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>omicser development with golem</h1>
                        <h4 class="author">andy henrie</h4>
            
            <h4 class="date">9/27/2021</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ergonyc/omicser/blob/master/vignettes/golem_startup.Rmd"><code>vignettes/golem_startup.Rmd</code></a></small>
      <div class="hidden name"><code>golem_startup.Rmd</code></div>

    </div>

    
    
<div id="omxr" class="section level1">
<h1 class="hasAnchor">
<a href="#omxr" class="anchor"></a>Introduction to <code>{OMXR}</code>
</h1>
<style>
img.left {
  float: left;
  margin-right: 1em;
}
</style>
<p><img src="img/thinkr-hex-golem2.png" class="left" width="20%"></p>
<p>The <a href="https://github.com/ergonyc/omicser">omicser</a> package is a shiny app built using the <a href="https://github.com/ThinkR-open/golem">golem</a> framework for building production-grade <a href="https://shiny.rstudio.com/">shiny</a> applications.</p>
<p>Note that the version used at the time of writing this book is 0.3.1.</p>
<div id="what-is-omicser" class="section level2">
<h2 class="hasAnchor">
<a href="#what-is-omicser" class="anchor"></a>What is <code>{omicser}</code>?</h2>
<p><em>Note: The current version of <a href="https://github.com/ergonyc/omicser">omicser</a> BLA BLAH BLAH.</em></p>
<p><a href="https://github.com/ergonyc/omicser">omicser</a> is a <strong>browser for simplifying the hypothesizign, browsing, and sharing of a <code>omic</code> data</strong>. Types of <code>-omic</code> data could be transcript<code>-omics</code>, prote<code>-omic</code>, metabol<code>-omic</code> , lipid<code>-omic</code> , etc. It focuses on creating a consistent and shared platform for browsing <code>-omic</code> data.</p>
<p>The stable release can be found on <del>CRAN</del> and installed with:</p>
<p><del><code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("omicser")</a></code></del></p>
<p>The <a href="https://github.com/ThinkR-open/golem">golem</a> development version can be found on GitHub and installed with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"ergonyc/omicser"</span><span class="op">)</span></code></pre></div>
<p>This repository will soon be transferred to NDCN. The version of the package used while writing this was:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"omicser"</span><span class="op">)</span></code></pre></div>
<pre><code>[1] '0.0.9.17092021'</code></pre>
<p>Some things to keep in mind before using <a href="https://github.com/ergonyc/omicser">omicser</a>:</p>
<ul>
<li><p>The <a href="https://github.com/ergonyc/omicser">omicser</a> application is contained inside a package.</p></li>
<li><p>A <a href="https://github.com/ergonyc/omicser">omicser</a> app is built with <code>shiny modules</code>, rather than a mono-lithic app / server.</p></li>
</ul>
</div>
<div id="understanding-omicser-app-structure" class="section level2">
<h2 class="hasAnchor">
<a href="#understanding-omicser-app-structure" class="anchor"></a>Understanding <code>{omicser}</code> app structure</h2>
<p><strong>The <a href="https://github.com/ergonyc/omicser">omicser</a> application is an R package</strong>. Having an R package architecture is perfectly suited for production-ready deploymentr.</p>
<p>Let’s focus on the architecture of the default <a href="https://github.com/ergonyc/omicser">omicser</a> app, and present the role that each file plays and how you can use (or not use) each of them.</p>
<p>The repository is layed out in a specific architecture:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Listing the files from the `omicser` project using {fs}</span>
<span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="http://fs.r-lib.org/reference/dir_tree.html">dir_tree</a></span><span class="op">(</span><span class="st">"."</span><span class="op">)</span></code></pre></div>
<p>If you are familiar with building R packages, this structure will look familiar to you. And for a good reason: a <a href="https://github.com/ThinkR-open/golem">golem</a> app IS a package.</p>
<div id="description-and-namespace" class="section level3">
<h3 class="hasAnchor">
<a href="#description-and-namespace" class="anchor"></a><code>DESCRIPTION</code> and <code>NAMESPACE</code>
</h3>
<p>The <code>DESCRIPTION</code> and <code>NAMESPACE</code> are <strong>standard package files</strong> (<em>i.e.</em> they are not <a href="https://github.com/ThinkR-open/golem">golem</a>-specific). In <code>DESCRIPTION</code>, you will add a series of metadata about your package, for example, who wrote the package, what is the package version, what is its goal, who to complain to if things go wrong, and also information about external dependencies, the license, the encoding, and so forth.</p>
<p>This <code>DESCRIPTION</code> file will be filled automatically by the first function you will run in <code>dev/01_start.R</code>, and by other functions from the <code>dev/</code> scripts. In other words, most of the time you will not interact with it directly, but through wrappers from <a href="https://github.com/ThinkR-open/golem">golem</a> and <a href="https://usethis.r-lib.org">usethis</a> <span class="citation">[@R-usethis]</span> which are listed in the <code>dev</code> scripts.</p>
<p>The <code>NAMESPACE</code> file is the file you will NEVER edit by hand! <strong>It defines how to interact with the rest of the package</strong>: what functions to import and from which package and what functions to export, <em>i.e.</em> what functions are available to the user when you do <code><a href="https://rdrr.io/r/base/library.html">library(golex)</a></code>. This file will be built when running the documenting process in your R package, i.e. when doing <code><a href="https://devtools.r-lib.org//reference/document.html">devtools::document()</a></code>, or more specifically in our case <code><a href="https://rdrr.io/pkg/golem/man/document_and_reload.html">golem::document_and_reload()</a></code>. This process will build the <code>man/</code> files and fill the <code>NAMESPACE</code>, by scanning the <code>{roxygen}</code> tags in your <code>.R</code> files.</p>
<p>If you want to learn more about these files, here are some resources you can refer to:</p>
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file">Writing R Extensions—The DESCRIPTION file</a></li>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Package-namespaces">Writing R Extensions—Package namespaces</a></li>
<li><a href="https://r-pkgs.org/description.html#">R Packages—Package metadata</a></li>
<li><a href="https://r-pkgs.org/namespace.html">R Packages—Namespace</a></li>
<li><a href="https://speakerdeck.com/colinfay/building-a-package-that-lasts-erum-2018-workshop">Building a package that lasts—eRum 2018 workshop</a></li>
</ul>
</div>
<div id="r" class="section level3">
<h3 class="hasAnchor">
<a href="#r" class="anchor"></a>R/</h3>
<p>The <code>R/</code> folder is <strong>the standard folder where you will store all your app functions</strong>. When you start your project with <a href="https://github.com/ThinkR-open/golem">golem</a>, this folder is pre-populated with three <code>.R</code> files: <code>app_config.R</code>, <code>app_server.R</code>, <code>app_ui.R</code> and <code>run_app.R</code>.</p>
<p>During the process of building your application, all the core functionalities of your app will be stored in this <code>R/</code> directory, which is the standard way to store functions when using the R package framework. Note that these files are the “core” features of your application itself, and that other .R files also exists. For example, when you will need to deploy your application on RStudio platforms, <a href="https://github.com/ThinkR-open/golem">golem</a> will create an <code>app.R</code> at the root of your directory.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> The <code>dev/</code> folder also contains <code>.R</code> scripts, and they are inside this folder as they should not live inside the <code>R/</code> folder: they are utilitarian files used during development, not core functionalities of your application.</p>
<p>Inside these <code>.R</code> files, contained inside the <code>R/</code> folder, you will find the content of your modules (the one added with <code>golem::add_modules()</code>) and the utilitarian/business logic functions, built with <code><a href="https://rdrr.io/pkg/golem/man/file_creation.html">golem::add_utils()</a></code> and <code><a href="https://rdrr.io/pkg/golem/man/file_creation.html">golem::add_fct()</a></code>.</p>
<p>Note also that this folder must not contain any sub-folders.</p>
<div id="app_config-r" class="section level4 unnumbered">
<h4 class="hasAnchor">
<a href="#app_config-r" class="anchor"></a>app_config.R</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' Access files in the current app</span>
<span class="co">#' </span>
<span class="co">#' NOTE: If you manually change your package </span>
<span class="co">#' name in the DESCRIPTION, don't forget to change it here too,</span>
<span class="co">#' and in the config file. For a safer name change mechanism, </span>
<span class="co">#' use the `golem::set_golem_name()` function.</span>
<span class="co">#' </span>
<span class="co">#' @param ... character vectors, specifying subdirectory </span>
<span class="co">#' and file(s) within your package. </span>
<span class="co">#' The default, none, returns the root of the app.</span>
<span class="co">#' </span>
<span class="co">#' @noRd</span>
<span class="va">app_sys</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span><span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="va">...</span>, package <span class="op">=</span> <span class="st">"golex"</span><span class="op">)</span>
<span class="op">}</span>
<span class="co">#' Read App Config</span>
<span class="co">#' </span>
<span class="co">#' @param value Value to retrieve from the config file. </span>
<span class="co">#' @param config GOLEM_CONFIG_ACTIVE value. </span>
<span class="co">#' If unset, R_CONFIG_ACTIVE.  If unset, "default".</span>
<span class="co">#' @param use_parent Logical, </span>
<span class="co">#' scan the parent directory for config file.</span>
<span class="co">#' </span>
<span class="co">#' @noRd</span>
<span class="va">get_golem_config</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span>
  <span class="va">value</span>, 
  <span class="va">config</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span><span class="op">(</span>
    <span class="st">"GOLEM_CONFIG_ACTIVE"</span>, 
    <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span><span class="op">(</span>
      <span class="st">"R_CONFIG_ACTIVE"</span>, 
      <span class="st">"default"</span>
    <span class="op">)</span>
  <span class="op">)</span>, 
  <span class="va">use_parent</span> <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span><span class="op">{</span>
  <span class="fu">config</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/config/man/get.html">get</a></span><span class="op">(</span>
    value <span class="op">=</span> <span class="va">value</span>, 
    config <span class="op">=</span> <span class="va">config</span>, 
    <span class="co"># Modify this if your config file is somewhere else:</span>
    file <span class="op">=</span> <span class="fu">app_sys</span><span class="op">(</span><span class="st">"golem-config.yml"</span><span class="op">)</span>, 
    use_parent <span class="op">=</span> <span class="va">use_parent</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>The <code>app_config.R</code> file contains internal mechanics for <a href="https://github.com/ThinkR-open/golem">golem</a>, notably for referring to values in the <code>inst/</code> folder, and to get values from the config file in the <code>inst/</code> folder. Keep in mind that if ever you need to change the name of your application, you will need to change it inside the <code>DESCRIPTION</code>, but also inside the <code>app_sys()</code> function. To make this process easier, you can use the <code><a href="https://rdrr.io/pkg/golem/man/golem_opts.html">golem::set_golem_name()</a></code>, which will perform both these actions, plus setting the name inside the config file.</p>
</div>
</div>
</div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p><a href="https://github.com/ThinkR-open/golem">golem</a> will automatically add this file to the <code>.Rbuildignore</code> file, i.e. make it be ignored by the package build process.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Andy Henrie.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
